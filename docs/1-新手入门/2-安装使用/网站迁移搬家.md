---
description: 将网站文件和数据库迁移到另个服务器
keywords:
  - BOM
draft: false
last_update:
  date: 2023-4-21 08:55:25
  author: 慧科云
---

## 情况一：前后网站域名相同

网站从服务器A迁移到服务器B时，需要做以下操作：

1. 服务器A域名和服务器B域名一致的情况下
2. 备份服务器A的全部文件和数据库，以免出错
3. 服务器A环境一定要保证能运行CMS程序，最好保持一致
4. 将服务器A网站文件全部上传到服务器B
5. 服务器B目录文件权限要和服务器A一致，如果不懂，先暂且给服务器B可读写权限（0777）
6. 如果数据库账号和密码有变化的时候，需要手动修改文件：/config/database.php
7. 访问网站后台，并执行更新全站缓存
8. 如果没有错误情况的话，就表示迁移成功

## 情况二：前后网站域名不一样

网站从本地迁移到服务器时，两者域名不一样的情况下：

1. 保证服务器环境能正常安装CMS
2. 在本地，使用phpmyadmin工具导出数据库文件，例如xxxx.sql
3. 在本地，执行后会生成一个数据库文件，例如xxx.sql
4. 在本地，打开这个sql文件，把本地域名替换成服务器的正式域名
5. 在本地，替换成功后，保存sql文件，再把这个sql导入进服务器的数据库中
6. 在本地，然后再把本地网站文件上传到服务器上
7. 在服务器上，linux服务器时，需要给一次全站777权限（迁移完成再按需设置权限）
8. 在服务器上，打开服务器中的配置文件：cache/config/site.php，把里面的老域名改成新域名
9. 在服务器上，如果数据库账号和密码有变化的时候，需要手动修改文件：/config/database.php
10. 在服务器上，访问网站后台，并执行更新全站缓存
11. 在服务器上，如果没有错误情况的话，就表示迁移成功
